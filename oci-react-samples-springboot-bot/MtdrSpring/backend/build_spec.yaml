version: 0.1
component: build
timeoutInSeconds: 100
shell: bash
failImmediatelyOnError: true

steps:
  - type: Command
    name: "CheckoutMainBranch"
    command: git checkout main

  - type: Command
    name: "PullChanges"
    command: git pull origin main

  - type: Command
    name: "ListRootDirectory"
    command: |
      echo "Listing contents of the root directory"
      ls -la

  - type: Command
    name: "NavigateToBackend"
    command: cd oci-react-samples-springboot-bot/MtdrSpring/backend
    
  - type: Command
    name: "RunUndeployScript"
    command: |
      cd oci-react-samples-springboot-bot/MtdrSpring/backend
      source undeploy.sh

  - type: Command
    name: "RunBuildScript"
    command: |
      cd oci-react-samples-springboot-bot/MtdrSpring/backend
      source build.sh

  - type: Command
    name: "RunDeployScript"
    command: |
      cd oci-react-samples-springboot-bot/MtdrSpring/backend
      source deploy.sh
